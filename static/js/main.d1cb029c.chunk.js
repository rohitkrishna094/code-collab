(this["webpackJsonpcode-collab"]=this["webpackJsonpcode-collab"]||[]).push([[0],{181:function(e,n,t){},182:function(e,n,t){},264:function(e,n,t){},265:function(e,n,t){},270:function(e,n,t){"use strict";t.r(n);var a=t(1),o=t.n(a),c=t(43),r=t.n(c),l=(t(181),t(296)),i=t(100),s=t(13),u=(t(182),t(292)),d=t(281),j=t(297),b=t(293),h=t(299),m=t(284),g=t(53),f=t.n(g),p=t(91),O=t(5),x=t(147),v=t.n(x),y=t(283),C=t(298),S=t(285),w=t(148),k=t(102),I=t.n(k),z=t(151),_='public class Main {\n  public static void main(String[] args) {\n      System.out.println("hello world");\n  }\n}',N='public void HelloWorld() {\n    //Say Hello!\n    Console.WriteLine("Hello World");\n}',E="def say_hello():\n    print('Hello, World')",V='fun main() {\n    println("Hello, World!")\n}  ',R='(defn hello []\n    (prn "Hello, World")\n  )\n  \n(hello)',W='#include <stdio.h>\n\nint main() {\n  printf("Hello, World\\n");\n  return 0;\n}',H='#include <iostream>\nusing namespace std;\n\nint main() {\n  cout << "Hello World";\n  return 0;\n}',L='-module(solution). \n-export([start/0]). \n\nstart() -> \n   io:fwrite("Hello, world!\\n").',D='console.log("hello world");',M="puts 'Hello World'",P='console.log("Hello World")',T='<?php\n  echo "Hello, World\\n";\n?>',A='package main\n\nimport "fmt"\n\nfunc main() {\n  fmt.Println("Hello, World!")\n}',J={50:{languageId:50,name:"C",mode:"c_cpp",defaultValue:W},54:{languageId:54,name:"C++",mode:"c_cpp",defaultValue:H},86:{languageId:86,name:"Clojure",mode:"clojure",defaultValue:R},51:{languageId:51,name:"C#",mode:"csharp",defaultValue:N},58:{languageId:58,name:"Erlang",mode:"erlang",defaultValue:L},60:{languageId:60,name:"Go",mode:"golang",defaultValue:A},62:{languageId:62,name:"Java",mode:"java",defaultValue:_},63:{languageId:63,name:"Javascript",mode:"javascript",defaultValue:D},78:{languageId:78,name:"Kotlin",mode:"kotlin",defaultValue:V},68:{languageId:68,name:"PHP",mode:"php",defaultValue:T},71:{languageId:71,name:"Python",mode:"python",defaultValue:E},72:{languageId:72,name:"Ruby",mode:"ruby",defaultValue:M},74:{languageId:74,name:"Typescript",mode:"typescript",defaultValue:P}},F=["monokai","github","tomorrow_night","tomorrow","kuroir","twilight","xcode","textmate","solarized_dark","solarized_light","terminal"],B="https://code-collab-api.herokuapp.com",K="".concat(B,"/api"),U="".concat(K,"/judge"),G=function(e){return new Promise((function(n){return setTimeout(n,e)}))},q=t(163),$=(t(208),t(209),t(210),t(211),t(212),t(213),t(214),t(215),t(216),t(217),t(218),t(219),t(220),t(221),t(222),t(223),t(224),t(225),t(226),t(227),t(228),t(229),t(230),t(149)),Q=t.n($).a.connect(B),X=t(4),Y=[{type:"message",payload:{data:"Environment is ready, just click run button and enjoy!"}}],Z=function(e){var n=e.userName,t=Object(a.useState)("java"),o=Object(O.a)(t,2),c=o[0],r=o[1],l=Object(a.useState)(62),i=Object(O.a)(l,2),s=i[0],u=i[1],b=Object(a.useState)(function(e){var n=J[e];if(n&&n.defaultValue)return n.defaultValue}(s+"")),g=Object(O.a)(b,2),x=g[0],k=g[1],_=Object(a.useState)("monokai"),N=Object(O.a)(_,2),E=N[0],V=N[1],R=Object(a.useState)(!1),W=Object(O.a)(R,2),H=W[0],L=W[1],D=Object(a.useState)(!1),M=Object(O.a)(D,2),P=(M[0],M[1]),T=Object(a.useState)(""),A=Object(O.a)(T,2),B=(A[0],A[1]),K=(Object(a.useRef)(null),Object(a.useReducer)((function(e,n){var t=n.type,a=n.payload,o=Object(w.cloneDeep)(e);if("message"===t){var c=a.data;return o.push({type:"message",payload:{data:c}}),o}if("coderun"===t){var r=a.userName;return o.push({type:"coderun",payload:{userName:r,langId:s}}),o}if("coderunresult"===t){var l=a.result;return o.push({type:"coderunresult",payload:{result:l}}),o}if("language_change"===t){var i=a.userName,u=a.language;return o.push({type:"language_change",payload:{userName:i,language:u}}),o}return e}),Y)),$=Object(O.a)(K,2),Z=$[0],ee=$[1];Object(a.useEffect)((function(){return Q.on("codechange",(function(e){k(e)})),Q.on("code_run",(function(e){ee(e)})),Q.on("language_change",(function(e){var n,t=e.id,a=e.mode,o=e.codeValue,c=e.userName,l=null===(n=J[t])||void 0===n?void 0:n.name;u(t),r(a),k(o),ee({type:"language_change",payload:{userName:c,language:l}})})),Q.on("code_run_result",(function(e){ee(e)})),function(){Q.off("codechange"),Q.off("code_run"),Q.off("language_change")}}),[]);var ne=function(){var e=Object(p.a)(f.a.mark((function e(n,t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),e.next=4,I.a.request({method:"POST",url:"".concat(U,"/submissions"),data:{languageId:n,sourceCode:t}});case 4:return a=e.sent,console.log("compile: ",a),e.abrupt("return",a.data.token);case 9:e.prev=9,e.t0=e.catch(0),console.log("Error while submitting",e.t0),L(!1),B(e.t0),P(!0);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,t){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return L(!1),P(!0),e.abrupt("return");case 4:return e.next=6,I.a.request({method:"GET",url:"".concat(U,"/submissions/").concat(n)}).then((function(e){var n=e.data.data,t=n.stderr,a=n.status,o=n.stdout,c=n.compile_output;if(console.log("results",e),a&&[1,2,3].includes(a.id)){console.log("we got stdout",o),L(!1);var r={type:"coderunresult",payload:{result:o}};ee(r),Q.emit("code_run_result",r)}else c?(console.log(c),L(!1),B(t),P(!0)):t?(console.log(t),L(!1),B(t),P(!0)):(console.log("something else happened"),L(!1))})).catch((function(e){console.log(e),L(!1),P(!0)}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(p.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(t={type:"coderun",payload:{userName:n,langId:s}}),Q.emit("code_run",t),e.next=5,ne(s,x);case 5:return a=e.sent,e.next=8,G(5e3);case 8:return e.next=10,te(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){return Object(X.jsx)(d.a,{color:"white",minWidth:"30%",width:"30%",flex:"1",bg:"#272822",direction:"column",height:"100%",padding:5,children:Z.map((function(e){var n=e.type,t=e.payload;if("message"===n){var a=t.data;return Object(X.jsx)(y.a,{children:a},Math.random())}if("coderun"===n){var o,c=t.userName,r=t.langId,l=null===(o=J[r])||void 0===o?void 0:o.name;return Object(X.jsxs)(y.a,{children:["User"," ",Object(X.jsx)(y.a,{as:"span",color:"#3182CE",children:c})," ","ran",Object(X.jsxs)(y.a,{as:"span",color:"#38A169",children:[" ",l]})," ","code just now."]},Math.random())}if("coderunresult"===n){var i=t.result;return Object(X.jsx)(y.a,{children:i},Math.random())}if("language_change"===n){var s=t.userName,u=t.language;return Object(X.jsxs)(y.a,{children:["User"," ",Object(X.jsx)(y.a,{as:"span",color:"#3182CE",children:s})," ","changed language to",Object(X.jsxs)(y.a,{as:"span",color:"#38A169",children:[" ",u]})]},Math.random())}return null}))})};return Object(X.jsxs)(d.a,{height:"100%",width:"100%",className:"container",children:[Object(X.jsx)(q.a,{defaultSize:{width:"70%",height:"100%"},style:{borderRight:"10px solid #202020"},maxWidth:"70%",minWidth:"30%",enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},children:Object(X.jsxs)(d.a,{direction:"column",position:"relative",height:"100%",width:"100%",bg:"cornsilk",className:"code-editor-comp",children:[Object(X.jsxs)(d.a,{color:"white",padding:2,className:"code-header",bg:"#202020",children:[Object(X.jsx)(j.a,{colorScheme:"blue",size:"sm",onClick:ae,disabled:H,children:Object(X.jsxs)(h.a,{children:[Object(X.jsx)(m.a,{children:"Run"}),H?Object(X.jsx)(C.a,{size:"sm"}):Object(X.jsx)(m.a,{children:Object(X.jsx)(z.a,{fontSize:"10px"})})]})}),Object(X.jsx)(S.a,{cursor:"pointer",ml:5,size:"sm",width:"7rem",borderRadius:"0.375rem",value:s,onChange:function(e){var t=e.target.value,a=J[t],o=a.mode,c=a.defaultValue;u(+t),r(o),k(c),ee({type:"language_change",payload:{userName:n,language:a.name}}),Q.emit("language_change",{id:t,mode:o,codeValue:c,userName:n})},children:Object.keys(J).map((function(e){var n=J[e];return Object(X.jsx)("option",{value:e,style:{backgroundColor:"#202020"},children:n.name},e)}))}),Object(X.jsx)(S.a,{cursor:"pointer",ml:5,size:"sm",width:"10rem",borderRadius:"0.375rem",value:E,onChange:function(e){var n=e.target.value;V(n)},children:F.map((function(e){return Object(X.jsx)("option",{value:e,style:{backgroundColor:"#202020"},children:e},Math.random())}))})]}),Object(X.jsx)(v.a,{mode:c,theme:E,height:"100%",width:"100%",onChange:function(e){k(e),Q.emit("codechange",e)},name:"CODEEDITOR",editorProps:{$blockScrolling:!0},fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,focus:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},value:x})]})}),Object(X.jsx)(oe,{})]})},ee=t(164),ne=(t(264),function(){var e=Object(a.useRef)(null);return Object(X.jsxs)(d.a,{height:"100%",width:"100%",bg:"red",direction:"column",children:[Object(X.jsxs)(d.a,{bg:"#202020",width:"100%",padding:2,children:[Object(X.jsx)(j.a,{size:"sm",colorScheme:"green",onClick:function(n){null===e||void 0===e||e.current.clear()},children:"Clear"}),Object(X.jsx)(j.a,{ml:5,size:"sm",colorScheme:"green",onClick:function(n){null===e||void 0===e||e.current.undo()},children:"Undo"}),Object(X.jsx)(j.a,{ml:5,size:"sm",colorScheme:"green",onClick:function(){var n=null===e||void 0===e?void 0:e.current.getSaveData();n&&localStorage.setItem("drawing",n)},children:"Save"}),Object(X.jsx)(j.a,{ml:5,size:"sm",colorScheme:"green",onClick:function(){var n=localStorage.getItem("drawing");n&&(null===e||void 0===e||e.current.loadSaveData(n))},children:"Load"})]}),Object(X.jsx)(ee.a,{ref:e,canvasWidth:"100%",canvasHeight:"100%",brushRadius:3,brushColor:"#3182CE",catenaryColor:"#FFD500",gridColor:"rgba(0, 180, 216, 0.1)",backgroundColor:"#272822",onChange:function(){null===e||void 0===e||e.current.getSaveData()}})]})}),te=t(105),ae=(t(265),t(156)),oe=function(){return new URLSearchParams(Object(s.g)().search)},ce=function(){return Object(X.jsx)(d.a,{cursor:"pointer",mr:3,children:[{value:"Code",color:"#38A169",fontSize:"2xl"},{value:"Collab",color:"#3182CE",fontSize:"2xl"}].map((function(e){var n=e.value,t=e.color,a=e.fontSize;return Object(X.jsx)(y.a,{as:"span",color:t,fontSize:a,children:n},Math.random())}))})},re=function(e){var n=[{value:"Code",icon:Object(X.jsx)(te.a,{})},{value:"Draw",icon:Object(X.jsx)(te.b,{})}],t=Object(s.h)().roomId,o=oe().get("user"),c=Object(u.a)();Object(a.useEffect)((function(){Q.on("userjoined",(function(e){console.log(e,"joined"),c({title:"".concat(e," joined"),status:"success",isClosable:!0})})),Q.on("userleft",(function(e){console.log(e,"left"),c({title:"".concat(e," left"),status:"error",isClosable:!0})}));var e={room:t,name:o};return Q.emit("joinroom",e),function(){Q.off("userjoined"),Q.off("userleft"),Q.off("joinroom")}}),[]);var r=function(){return Object(X.jsxs)(d.a,{className:"navbar",color:"white",backgroundColor:"#202020",alignItems:"center",padding:2,children:[Object(X.jsx)(ce,{}),Object(X.jsx)(ae.CopyToClipboard,{text:t,onCopy:function(e,n){console.log("copied",e),c({title:"Copied roomId: ".concat(t),status:"success",isClosable:!0,position:"top"})},children:Object(X.jsx)(j.a,{colorScheme:"green",size:"sm",children:"Copy RoomId"})})]})};return Object(X.jsxs)(d.a,{className:"playground",direction:"column",height:"100vh",width:"100vw",children:[Object(X.jsx)(r,{}),Object(X.jsx)(d.a,{className:"playground-inner",flex:"1",children:Object(X.jsxs)(b.e,{variant:"enclosed-colored",bgColor:"#272822",borderBottomColor:"#202020",width:"100%",display:"flex",flexDirection:"column",defaultIndex:0,isLazy:!0,children:[Object(X.jsx)(b.b,{children:n.map((function(e){return Object(X.jsx)(b.a,{className:"tab_mine",bg:"#272822",color:"grey",borderTop:"none",borderLeft:"none",borderRight:"none",borderBottom:"none",_selected:{color:"white",bg:"#202020",border:"none",borderTop:"3px solid green",borderTopColor:"blue.500"},children:Object(X.jsxs)(h.a,{children:[Object(X.jsx)(m.a,{children:e.icon}),Object(X.jsx)(m.a,{children:e.value})]})},Math.random())}))}),Object(X.jsxs)(b.d,{flex:"1 1 auto",children:[Object(X.jsx)(b.c,{padding:0,height:"100%",children:Object(X.jsx)(Z,{userName:o})}),Object(X.jsx)(b.c,{padding:0,height:"100%",children:Object(X.jsx)(ne,{})})]})]})})]})},le=t(288),ie=t(291),se=t(289),ue=t(294),de=function(){var e=Object(s.f)(),n=Object(le.a)(),t=n.isOpen,o=n.onOpen,c=n.onClose,r=Object(a.useState)(""),l=Object(O.a)(r,2),i=l[0],u=l[1],d=Object(a.useState)(!0),b=Object(O.a)(d,2),h=b[0],m=b[1],g=function(){var n=Object(ue.a)();e.push("".concat(n,"?user=").concat(i))};return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(j.a,{colorScheme:"blue",onClick:o,children:"Launch Session"}),Object(X.jsxs)(ie.a,{isOpen:t,onClose:c,isCentered:!0,children:[Object(X.jsx)(ie.g,{}),Object(X.jsxs)(ie.d,{children:[Object(X.jsx)(ie.f,{children:"Launch a Collaborative Session"}),Object(X.jsx)(ie.c,{}),Object(X.jsxs)(ie.b,{children:[Object(X.jsx)(y.a,{mb:4,fontSize:"md",children:"Enter your Name:"}),Object(X.jsx)(se.a,{autoFocus:!0,value:i,onChange:function(e){var n=e.target.value;u(n),m(!(n&&n.length>0))},placeholder:"Ada Lovelace",onKeyDown:function(e){"Enter"!==e.key||h||g()}})]}),Object(X.jsx)(ie.e,{children:Object(X.jsx)(j.a,{colorScheme:"blue",mr:3,onClick:function(e){g()},disabled:h,children:"Launch"})})]})]})]})},je=function(){var e=Object(s.f)(),n=Object(le.a)(),t=n.isOpen,o=n.onOpen,c=n.onClose,r=Object(a.useState)(""),l=Object(O.a)(r,2),i=l[0],u=l[1],d=Object(a.useState)(""),b=Object(O.a)(d,2),h=b[0],m=b[1],g=Object(a.useState)(!0),f=Object(O.a)(g,2),p=f[0],x=f[1],v=function(e,n){return(null===e||void 0===e?void 0:e.length)>0&&(null===n||void 0===n?void 0:n.length)>0},C=function(){e.push("".concat(h,"?user=").concat(i))},S=function(e){"Enter"!==e.key||p||C()};return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(j.a,{colorScheme:"green",onClick:o,mt:6,children:"Join a Session"}),Object(X.jsxs)(ie.a,{isOpen:t,onClose:c,isCentered:!0,children:[Object(X.jsx)(ie.g,{}),Object(X.jsxs)(ie.d,{children:[Object(X.jsx)(ie.f,{children:"Join an already running session"}),Object(X.jsx)(ie.c,{}),Object(X.jsxs)(ie.b,{children:[Object(X.jsx)(y.a,{mb:4,fontSize:"md",children:"Enter your Name:"}),Object(X.jsx)(se.a,{value:i,onChange:function(e){var n=e.target.value;u(n),x(!v(n,h))},placeholder:"Ada Lovelace",autoFocus:!0,onKeyDown:S}),Object(X.jsx)(y.a,{mt:4,mb:4,fontSize:"md",children:"Enter Room ID:"}),Object(X.jsx)(se.a,{value:h,onChange:function(e){var n=e.target.value;m(n),x(!v(i,n))},placeholder:"xxxxxxxx-yyyy-zzzz-aaaa-bbbbbbbbbbbb",onKeyDown:S})]}),Object(X.jsx)(ie.e,{children:Object(X.jsx)(j.a,{colorScheme:"blue",mr:3,onClick:function(e){C()},disabled:p,children:"Join"})})]})]})]})},be=function(e){return Object(X.jsxs)(d.a,{height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center",bg:"#272822",direction:"column",children:[Object(X.jsx)(de,{}),Object(X.jsx)(je,{})]})};var he=function(){return Object(X.jsx)(l.a,{children:Object(X.jsx)(i.a,{children:Object(X.jsxs)(s.c,{children:[Object(X.jsx)(s.a,{exact:!0,path:"/",component:be}),Object(X.jsx)(s.a,{exact:!0,path:"/:roomId",component:re})]})})})};r.a.render(Object(X.jsx)(o.a.StrictMode,{children:Object(X.jsx)(he,{})}),document.getElementById("root"))}},[[270,1,2]]]);
//# sourceMappingURL=main.d1cb029c.chunk.js.map
(this["webpackJsonpcode-collab"]=this["webpackJsonpcode-collab"]||[]).push([[0],{181:function(e,n,t){},182:function(e,n,t){},680:function(e,n,t){},681:function(e,n,t){},686:function(e,n,t){"use strict";t.r(n);var a,o=t(1),c=t.n(o),r=t(43),l=t.n(r),i=(t(181),t(712)),s=t(100),u=t(13),d=(t(182),t(708)),j=t(697),b=t(713),h=t(709),m=t(715),g=t(700),p=t(53),O=t.n(p),f=t(91),x=t(5),v=t(147),C=t.n(v),S=t(714),y=t(701),_=t(148),E=t(102),A=t.n(E),N=t(151),w=(t(208),t(209),'public class Main {\n  public static void main(String[] args) {\n      System.out.println("hello world");\n  }\n}'),k='public void HelloWorld() {\n    //Say Hello!\n    Console.WriteLine("Hello World");\n}',R="def say_hello():\n    print('Hello, World')",G='fun main() {\n    println("Hello, World!")\n}  ',I='(defn hello []\n    (prn "Hello, World")\n  )\n  \n(hello)',U='#include <stdio.h>\n\nint main() {\n  printf("Hello, World\\n");\n  return 0;\n}',L='#include <iostream>\nusing namespace std;\n\nint main() {\n  cout << "Hello World";\n  return 0;\n}',z='-module(solution). \n-export([start/0]). \n\nstart() -> \n   io:fwrite("Hello, world!\\n").',D='console.log("hello world");',H="puts 'Hello World'",V='console.log("Hello World")',M='<?php\n  echo "Hello, World\\n";\n?>',W='package main\n\nimport "fmt"\n\nfunc main() {\n  fmt.Println("Hello, World!")\n}',T={50:{languageId:50,name:"C",mode:"c_cpp",defaultValue:U},54:{languageId:54,name:"C++",mode:"c_cpp",defaultValue:L},86:{languageId:86,name:"Clojure",mode:"clojure",defaultValue:I},51:{languageId:51,name:"C#",mode:"csharp",defaultValue:k},58:{languageId:58,name:"Erlang",mode:"erlang",defaultValue:z},60:{languageId:60,name:"Go",mode:"golang",defaultValue:W},62:{languageId:62,name:"Java",mode:"java",defaultValue:w},63:{languageId:63,name:"Javascript",mode:"javascript",defaultValue:D},78:{languageId:78,name:"Kotlin",mode:"kotlin",defaultValue:G},68:{languageId:68,name:"PHP",mode:"php",defaultValue:M},71:{languageId:71,name:"Python",mode:"python",defaultValue:R},72:{languageId:72,name:"Ruby",mode:"ruby",defaultValue:H},74:{languageId:74,name:"Typescript",mode:"typescript",defaultValue:V}},P=["monokai","github","tomorrow_night","tomorrow","kuroir","twilight","xcode","textmate","solarized_dark","solarized_light","terminal"],J="https://code-collab-api.herokuapp.com",F="".concat(J,"/api"),B="".concat(F,"/judge"),K=function(e){return new Promise((function(n){return setTimeout(n,e)}))},q=t(163),$=(t(624),t(625),t(626),t(627),t(628),t(629),t(630),t(631),t(632),t(633),t(634),t(635),t(636),t(637),t(638),t(639),t(640),t(641),t(642),t(643),t(644),t(645),t(646),t(149)),Q=t.n($).a.connect(J),X="userjoin",Y="codechange",Z="language_change",ee="code_run",ne="code_run_result",te="userleft";!function(e){e[e.A_LANGUAGE_CHANGE=0]="A_LANGUAGE_CHANGE",e[e.A_MESSAGE=1]="A_MESSAGE",e[e.A_CODE_RUN_RESULT=2]="A_CODE_RUN_RESULT",e[e.A_CODE_RUN=3]="A_CODE_RUN"}(a||(a={}));var ae=t(699),oe=t(4),ce=function(e){var n=e.items;return Object(oe.jsx)(j.a,{color:"white",minWidth:"30%",width:"30%",flex:"1",bg:"#272822",direction:"column",height:"100%",padding:5,children:n.map((function(e){var n=e.type,t=e.payload;if(n===a.A_MESSAGE){var o=t.data;return Object(oe.jsx)(ae.a,{children:o},Math.random())}if(n===a.A_CODE_RUN){var c,r=t.userName,l=t.langId,i=null===(c=T[l])||void 0===c?void 0:c.name;return Object(oe.jsxs)(ae.a,{children:["User"," ",Object(oe.jsx)(ae.a,{as:"span",color:"#3182CE",children:r})," ","ran",Object(oe.jsxs)(ae.a,{as:"span",color:"#38A169",children:[" ",i]})," ","code just now."]},Math.random())}if(n===a.A_CODE_RUN_RESULT){var s=t.result;return Object(oe.jsx)(ae.a,{whiteSpace:"pre",children:s},Math.random())}if(n===a.A_LANGUAGE_CHANGE){var u=t.userName,d=t.language;return Object(oe.jsxs)(ae.a,{children:["User"," ",Object(oe.jsx)(ae.a,{as:"span",color:"#3182CE",children:u})," ","changed language to",Object(oe.jsxs)(ae.a,{as:"span",color:"#38A169",children:[" ",d]})]},Math.random())}return null}))})},re=[{type:a.A_MESSAGE,payload:{data:"Environment is ready, just click run button and enjoy!"}}],le=function(e){var n=e.userName,t=Object(o.useState)("java"),c=Object(x.a)(t,2),r=c[0],l=c[1],i=Object(o.useState)(62),s=Object(x.a)(i,2),u=s[0],d=s[1],h=Object(o.useState)(function(e){var n=T[e];if(n&&n.defaultValue)return n.defaultValue}(u+"")),p=Object(x.a)(h,2),v=p[0],E=p[1],w=Object(o.useState)("monokai"),k=Object(x.a)(w,2),R=k[0],G=k[1],I=Object(o.useState)(!1),U=Object(x.a)(I,2),L=U[0],z=U[1],D=Object(o.useState)(!1),H=Object(x.a)(D,2),V=(H[0],H[1]),M=Object(o.useState)(""),W=Object(x.a)(M,2),J=(W[0],W[1]),F=(Object(o.useRef)(null),Object(o.useReducer)((function(e,n){var t=n.type,o=n.payload,c=Object(_.cloneDeep)(e);if(t===a.A_MESSAGE){var r=o.data;return c.push({type:a.A_MESSAGE,payload:{data:r}}),c}if(t===a.A_CODE_RUN){var l=o.userName;return c.push({type:a.A_CODE_RUN,payload:{userName:l,langId:u}}),c}if(t===a.A_CODE_RUN_RESULT){var i=o.result;return c.push({type:a.A_CODE_RUN_RESULT,payload:{result:i}}),c}if(t===a.A_LANGUAGE_CHANGE){var s=o.userName,d=o.language;return c.push({type:a.A_LANGUAGE_CHANGE,payload:{userName:s,language:d}}),c}return e}),re)),$=Object(x.a)(F,2),X=$[0],te=$[1];Object(o.useEffect)((function(){return Q.on(Y,(function(e){E(e)})),Q.on(ee,(function(e){te(e)})),Q.on(Z,(function(e){var n,t=e.id,o=e.mode,c=e.codeValue,r=e.userName,i=null===(n=T[t])||void 0===n?void 0:n.name;d(t),l(o),E(c),te({type:a.A_LANGUAGE_CHANGE,payload:{userName:r,language:i}})})),Q.on(ne,(function(e){te(e)})),function(){Q.off(Y),Q.off(ee),Q.off(Z)}}),[]);var ae=function(){var e=Object(f.a)(O.a.mark((function e(n,t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,z(!0),e.next=4,A.a.request({method:"POST",url:"".concat(B,"/submissions"),data:{languageId:n,sourceCode:t}});case 4:return a=e.sent,console.log("compile: ",a),e.abrupt("return",a.data.token);case 9:e.prev=9,e.t0=e.catch(0),console.log("Error while submitting",e.t0),z(!1),J(e.t0),V(!0);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,t){return e.apply(this,arguments)}}(),le=function(){var e=Object(f.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return z(!1),V(!0),e.abrupt("return");case 4:return e.next=6,A.a.request({method:"GET",url:"".concat(B,"/submissions/").concat(n)}).then((function(e){var n=e.data.data,t=n.stderr,o=n.status,c=n.stdout,r=n.compile_output;if(console.log("results",e),o&&[1,2,3].includes(o.id)){console.log("we got stdout",c),z(!1);var l={type:a.A_CODE_RUN_RESULT,payload:{result:c}};te(l),Q.emit(ne,l)}else r?(console.log(r),z(!1),J(t),V(!0)):t?(console.log(t),z(!1),J(t),V(!0)):(console.log("something else happened"),z(!1))})).catch((function(e){console.log(e),z(!1),V(!0)}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(f.a)(O.a.mark((function e(){var t,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={type:a.A_CODE_RUN,payload:{userName:n,langId:u}},te(t),Q.emit(ee,t),e.next=5,ae(u,v);case 5:return o=e.sent,e.next=8,K(5e3);case 8:return e.next=10,le(o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(oe.jsxs)(j.a,{height:"100%",width:"100%",className:"container",children:[Object(oe.jsx)(q.a,{defaultSize:{width:"70%",height:"100%"},style:{borderRight:"10px solid #202020"},maxWidth:"70%",minWidth:"30%",enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},children:Object(oe.jsxs)(j.a,{direction:"column",position:"relative",height:"100%",width:"100%",bg:"cornsilk",className:"code-editor-comp",children:[Object(oe.jsxs)(j.a,{color:"white",padding:2,className:"code-header",bg:"#202020",children:[Object(oe.jsx)(b.a,{colorScheme:"blue",size:"sm",onClick:ie,disabled:L,children:Object(oe.jsxs)(m.a,{children:[Object(oe.jsx)(g.a,{children:"Run"}),L?Object(oe.jsx)(S.a,{size:"sm"}):Object(oe.jsx)(g.a,{children:Object(oe.jsx)(N.a,{fontSize:"10px"})})]})}),Object(oe.jsx)(y.a,{cursor:"pointer",ml:5,size:"sm",width:"7rem",borderRadius:"0.375rem",value:u,onChange:function(e){var t=e.target.value,o=T[t],c=o.mode,r=o.defaultValue;d(+t),l(c),E(r),te({type:a.A_LANGUAGE_CHANGE,payload:{userName:n,language:o.name}}),Q.emit(Z,{id:t,mode:c,codeValue:r,userName:n})},children:Object.keys(T).map((function(e){var n=T[e];return Object(oe.jsx)("option",{value:e,style:{backgroundColor:"#202020"},children:n.name},e)}))}),Object(oe.jsx)(y.a,{cursor:"pointer",ml:5,size:"sm",width:"10rem",borderRadius:"0.375rem",value:R,onChange:function(e){var n=e.target.value;G(n)},children:P.map((function(e){return Object(oe.jsx)("option",{value:e,style:{backgroundColor:"#202020"},children:e},Math.random())}))})]}),Object(oe.jsx)(C.a,{mode:r,theme:R,height:"100%",width:"100%",onChange:function(e){E(e),Q.emit(Y,e)},name:"CODEEDITOR",editorProps:{$blockScrolling:!0},fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,focus:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},value:v})]})}),Object(oe.jsx)(ce,{items:X})]})},ie=t(164),se=(t(680),function(){var e=Object(o.useRef)(null);return Object(oe.jsxs)(j.a,{height:"100%",width:"100%",bg:"red",direction:"column",children:[Object(oe.jsxs)(j.a,{bg:"#202020",width:"100%",padding:2,children:[Object(oe.jsx)(b.a,{size:"sm",colorScheme:"green",onClick:function(n){null===e||void 0===e||e.current.clear()},children:"Clear"}),Object(oe.jsx)(b.a,{ml:5,size:"sm",colorScheme:"green",onClick:function(n){null===e||void 0===e||e.current.undo()},children:"Undo"}),Object(oe.jsx)(b.a,{ml:5,size:"sm",colorScheme:"green",onClick:function(){var n=null===e||void 0===e?void 0:e.current.getSaveData();n&&localStorage.setItem("drawing",n)},children:"Save"}),Object(oe.jsx)(b.a,{ml:5,size:"sm",colorScheme:"green",onClick:function(){var n=localStorage.getItem("drawing");n&&(null===e||void 0===e||e.current.loadSaveData(n))},children:"Load"})]}),Object(oe.jsx)(ie.a,{ref:e,canvasWidth:"100%",canvasHeight:"100%",brushRadius:3,brushColor:"#3182CE",catenaryColor:"#FFD500",gridColor:"rgba(0, 180, 216, 0.1)",backgroundColor:"#272822",onChange:function(){null===e||void 0===e||e.current.getSaveData()}})]})}),ue=t(105),de=(t(681),t(156)),je=function(){return new URLSearchParams(Object(u.g)().search)},be=function(){var e=Object(u.f)();return Object(oe.jsx)(j.a,{cursor:"pointer",mr:3,onClick:function(n){e.push("/")},children:[{value:"Code",color:"#38A169",fontSize:"2xl"},{value:"Collab",color:"#3182CE",fontSize:"2xl"}].map((function(e){var n=e.value,t=e.color,a=e.fontSize;return Object(oe.jsx)(ae.a,{as:"span",color:t,fontSize:a,children:n},Math.random())}))})},he=function(e){var n=[{value:"Code",icon:Object(oe.jsx)(ue.a,{})},{value:"Draw",icon:Object(oe.jsx)(ue.b,{})}],t=Object(u.h)().roomId,a=je().get("user"),c=Object(d.a)();Object(o.useEffect)((function(){Q.on(X,(function(e){console.log(e,"joined"),c({title:"".concat(e," joined"),status:"success",isClosable:!0})})),Q.on(te,(function(e){console.log(e,"left"),c({title:"".concat(e," left"),status:"error",isClosable:!0})}));var e={room:t,name:a};return Q.emit(X,e),function(){Q.off(X),Q.off(te)}}),[]);var r=function(){return Object(oe.jsxs)(j.a,{className:"navbar",color:"white",backgroundColor:"#202020",alignItems:"center",padding:2,children:[Object(oe.jsx)(be,{}),Object(oe.jsx)(de.CopyToClipboard,{text:t,onCopy:function(e,n){console.log("copied",e),c({title:"Copied roomId: ".concat(t),status:"success",isClosable:!0,position:"top"})},children:Object(oe.jsx)(b.a,{colorScheme:"green",size:"sm",children:"Copy RoomId"})})]})};return Object(oe.jsxs)(j.a,{className:"playground",direction:"column",height:"100vh",width:"100vw",children:[Object(oe.jsx)(r,{}),Object(oe.jsx)(j.a,{className:"playground-inner",flex:"1",children:Object(oe.jsxs)(h.e,{variant:"enclosed-colored",bgColor:"#272822",borderBottomColor:"#202020",width:"100%",display:"flex",flexDirection:"column",defaultIndex:0,isLazy:!0,children:[Object(oe.jsx)(h.b,{children:n.map((function(e){return Object(oe.jsx)(h.a,{className:"tab_mine",bg:"#272822",color:"grey",borderTop:"none",borderLeft:"none",borderRight:"none",borderBottom:"none",_selected:{color:"white",bg:"#202020",border:"none",borderTop:"3px solid green",borderTopColor:"blue.500"},children:Object(oe.jsxs)(m.a,{children:[Object(oe.jsx)(g.a,{children:e.icon}),Object(oe.jsx)(g.a,{children:e.value})]})},Math.random())}))}),Object(oe.jsxs)(h.d,{flex:"1 1 auto",children:[Object(oe.jsx)(h.c,{padding:0,height:"100%",children:Object(oe.jsx)(le,{userName:a})}),Object(oe.jsx)(h.c,{padding:0,height:"100%",children:Object(oe.jsx)(se,{})})]})]})})]})},me=t(704),ge=t(707),pe=t(705),Oe=t(710),fe=function(){var e=Object(u.f)(),n=Object(me.a)(),t=n.isOpen,a=n.onOpen,c=n.onClose,r=Object(o.useState)(""),l=Object(x.a)(r,2),i=l[0],s=l[1],d=Object(o.useState)(!0),j=Object(x.a)(d,2),h=j[0],m=j[1],g=function(){var n=Object(Oe.a)();e.push("".concat(n,"?user=").concat(i))};return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(b.a,{colorScheme:"blue",onClick:a,children:"Launch Session"}),Object(oe.jsxs)(ge.a,{isOpen:t,onClose:c,isCentered:!0,children:[Object(oe.jsx)(ge.g,{}),Object(oe.jsxs)(ge.d,{children:[Object(oe.jsx)(ge.f,{children:"Launch a Collaborative Session"}),Object(oe.jsx)(ge.c,{}),Object(oe.jsxs)(ge.b,{children:[Object(oe.jsx)(ae.a,{mb:4,fontSize:"md",children:"Enter your Name:"}),Object(oe.jsx)(pe.a,{autoFocus:!0,value:i,onChange:function(e){var n=e.target.value;s(n),m(!(n&&n.length>0))},placeholder:"Ada Lovelace",onKeyDown:function(e){"Enter"!==e.key||h||g()}})]}),Object(oe.jsx)(ge.e,{children:Object(oe.jsx)(b.a,{colorScheme:"blue",mr:3,onClick:function(e){g()},disabled:h,children:"Launch"})})]})]})]})},xe=function(){var e=Object(u.f)(),n=Object(me.a)(),t=n.isOpen,a=n.onOpen,c=n.onClose,r=Object(o.useState)(""),l=Object(x.a)(r,2),i=l[0],s=l[1],d=Object(o.useState)(""),j=Object(x.a)(d,2),h=j[0],m=j[1],g=Object(o.useState)(!0),p=Object(x.a)(g,2),O=p[0],f=p[1],v=function(e,n){return(null===e||void 0===e?void 0:e.length)>0&&(null===n||void 0===n?void 0:n.length)>0},C=function(){e.push("".concat(h,"?user=").concat(i))},S=function(e){"Enter"!==e.key||O||C()};return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(b.a,{colorScheme:"green",onClick:a,mt:6,children:"Join a Session"}),Object(oe.jsxs)(ge.a,{isOpen:t,onClose:c,isCentered:!0,children:[Object(oe.jsx)(ge.g,{}),Object(oe.jsxs)(ge.d,{children:[Object(oe.jsx)(ge.f,{children:"Join an already running session"}),Object(oe.jsx)(ge.c,{}),Object(oe.jsxs)(ge.b,{children:[Object(oe.jsx)(ae.a,{mb:4,fontSize:"md",children:"Enter your Name:"}),Object(oe.jsx)(pe.a,{value:i,onChange:function(e){var n=e.target.value;s(n),f(!v(n,h))},placeholder:"Ada Lovelace",autoFocus:!0,onKeyDown:S}),Object(oe.jsx)(ae.a,{mt:4,mb:4,fontSize:"md",children:"Enter Room ID:"}),Object(oe.jsx)(pe.a,{value:h,onChange:function(e){var n=e.target.value;m(n),f(!v(i,n))},placeholder:"xxxxxxxx-yyyy-zzzz-aaaa-bbbbbbbbbbbb",onKeyDown:S})]}),Object(oe.jsx)(ge.e,{children:Object(oe.jsx)(b.a,{colorScheme:"blue",mr:3,onClick:function(e){C()},disabled:O,children:"Join"})})]})]})]})},ve=function(e){return Object(oe.jsxs)(j.a,{height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center",bg:"#272822",direction:"column",children:[Object(oe.jsx)(fe,{}),Object(oe.jsx)(xe,{})]})};var Ce=function(){return Object(oe.jsx)(i.a,{children:Object(oe.jsx)(s.a,{children:Object(oe.jsxs)(u.c,{children:[Object(oe.jsx)(u.a,{exact:!0,path:"/",component:ve}),Object(oe.jsx)(u.a,{exact:!0,path:"/:roomId",component:he})]})})})};l.a.render(Object(oe.jsx)(c.a.StrictMode,{children:Object(oe.jsx)(Ce,{})}),document.getElementById("root"))}},[[686,1,2]]]);
//# sourceMappingURL=main.c3698d8f.chunk.js.map
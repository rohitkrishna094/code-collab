(this["webpackJsonpcode-collab"]=this["webpackJsonpcode-collab"]||[]).push([[0],{174:function(e,n,t){},175:function(e,n,t){},671:function(e,n,t){},676:function(e,n,t){"use strict";t.r(n);var o,a=t(1),c=t.n(a),r=t(43),l=t.n(r),i=(t(174),t(704)),s=t(100),u=t(12),d=(t(175),t(700)),j=t(689),b=t(705),h=t(701),m=t(707),f=t(692),p=t(53),O=t.n(p),g=t(91),x=t(5),v=t(144),C=t.n(v),S=t(706),y=t(693),E=t(145),_=t(102),A=t.n(_),w=t(148),N=(t(201),t(202),'public class Main {\n  public static void main(String[] args) {\n      System.out.println("hello world");\n  }\n}'),R='public void HelloWorld() {\n    //Say Hello!\n    Console.WriteLine("Hello World");\n}',k="def say_hello():\n    print('Hello, World')",G='fun main() {\n    println("Hello, World!")\n}  ',U='(defn hello []\n    (prn "Hello, World")\n  )\n  \n(hello)',L='#include <stdio.h>\n\nint main() {\n  printf("Hello, World\\n");\n  return 0;\n}',z='#include <iostream>\nusing namespace std;\n\nint main() {\n  cout << "Hello World";\n  return 0;\n}',I='-module(solution). \n-export([start/0]). \n\nstart() -> \n   io:fwrite("Hello, world!\\n").',H='console.log("hello world");',D="puts 'Hello World'",M='console.log("Hello World")',V='<?php\n  echo "Hello, World\\n";\n?>',W='package main\n\nimport "fmt"\n\nfunc main() {\n  fmt.Println("Hello, World!")\n}',T={50:{languageId:50,name:"C",mode:"c_cpp",defaultValue:L},54:{languageId:54,name:"C++",mode:"c_cpp",defaultValue:z},86:{languageId:86,name:"Clojure",mode:"clojure",defaultValue:U},51:{languageId:51,name:"C#",mode:"csharp",defaultValue:R},58:{languageId:58,name:"Erlang",mode:"erlang",defaultValue:I},60:{languageId:60,name:"Go",mode:"golang",defaultValue:W},62:{languageId:62,name:"Java",mode:"java",defaultValue:N},63:{languageId:63,name:"Javascript",mode:"javascript",defaultValue:H},78:{languageId:78,name:"Kotlin",mode:"kotlin",defaultValue:G},68:{languageId:68,name:"PHP",mode:"php",defaultValue:V},71:{languageId:71,name:"Python",mode:"python",defaultValue:k},72:{languageId:72,name:"Ruby",mode:"ruby",defaultValue:D},74:{languageId:74,name:"Typescript",mode:"typescript",defaultValue:M}},P=["monokai","github","tomorrow_night","tomorrow","kuroir","twilight","xcode","textmate","solarized_dark","solarized_light","terminal"],J="https://code-collab-api.herokuapp.com",B="".concat(J,"/api"),F="".concat(B,"/judge"),K=function(e){return new Promise((function(n){return setTimeout(n,e)}))},q=t(157),X=(t(617),t(618),t(619),t(620),t(621),t(622),t(623),t(624),t(625),t(626),t(627),t(628),t(629),t(630),t(631),t(632),t(633),t(634),t(635),t(636),t(637),t(638),t(639),t(146)),Y=t.n(X).a.connect(J),$="userjoin",Q="codechange",Z="language_change",ee="code_run",ne="code_run_result",te="userleft";!function(e){e[e.A_LANGUAGE_CHANGE=0]="A_LANGUAGE_CHANGE",e[e.A_MESSAGE=1]="A_MESSAGE",e[e.A_CODE_RUN_RESULT=2]="A_CODE_RUN_RESULT",e[e.A_CODE_RUN=3]="A_CODE_RUN"}(o||(o={}));var oe=t(691),ae=t(4),ce=function(e){var n=e.items;return Object(ae.jsx)(j.a,{color:"white",minWidth:"30%",width:"30%",flex:"1",bg:"#272822",direction:"column",height:"100%",padding:5,children:n.map((function(e){var n=e.type,t=e.payload;if(n===o.A_MESSAGE){var a=t.data;return Object(ae.jsx)(oe.a,{children:a},Math.random())}if(n===o.A_CODE_RUN){var c,r=t.userName,l=t.langId,i=null===(c=T[l])||void 0===c?void 0:c.name;return Object(ae.jsxs)(oe.a,{children:["User"," ",Object(ae.jsx)(oe.a,{as:"span",color:"#3182CE",children:r})," ","ran",Object(ae.jsxs)(oe.a,{as:"span",color:"#38A169",children:[" ",i]})," ","code just now."]},Math.random())}if(n===o.A_CODE_RUN_RESULT){var s=t.result;return Object(ae.jsx)(oe.a,{whiteSpace:"pre",children:s},Math.random())}if(n===o.A_LANGUAGE_CHANGE){var u=t.userName,d=t.language;return Object(ae.jsxs)(oe.a,{children:["User"," ",Object(ae.jsx)(oe.a,{as:"span",color:"#3182CE",children:u})," ","changed language to",Object(ae.jsxs)(oe.a,{as:"span",color:"#38A169",children:[" ",d]})]},Math.random())}return null}))})},re=[{type:o.A_MESSAGE,payload:{data:"Environment is ready, just click run button and enjoy!"}}],le=function(e){var n=e.userName,t=Object(a.useState)("java"),c=Object(x.a)(t,2),r=c[0],l=c[1],i=Object(a.useState)(62),s=Object(x.a)(i,2),u=s[0],d=s[1],h=Object(a.useState)(function(e){var n=T[e];if(n&&n.defaultValue)return n.defaultValue}(u+"")),p=Object(x.a)(h,2),v=p[0],_=p[1],N=Object(a.useState)("monokai"),R=Object(x.a)(N,2),k=R[0],G=R[1],U=Object(a.useState)(!1),L=Object(x.a)(U,2),z=L[0],I=L[1],H=Object(a.useState)(!1),D=Object(x.a)(H,2),M=(D[0],D[1]),V=Object(a.useState)(""),W=Object(x.a)(V,2),J=(W[0],W[1]),B=(Object(a.useRef)(null),Object(a.useReducer)((function(e,n){var t=n.type,a=n.payload,c=Object(E.cloneDeep)(e);if(t===o.A_MESSAGE){var r=a.data;return c.push({type:o.A_MESSAGE,payload:{data:r}}),c}if(t===o.A_CODE_RUN){var l=a.userName;return c.push({type:o.A_CODE_RUN,payload:{userName:l,langId:u}}),c}if(t===o.A_CODE_RUN_RESULT){var i=a.result;return c.push({type:o.A_CODE_RUN_RESULT,payload:{result:i}}),c}if(t===o.A_LANGUAGE_CHANGE){var s=a.userName,d=a.language;return c.push({type:o.A_LANGUAGE_CHANGE,payload:{userName:s,language:d}}),c}return e}),re)),X=Object(x.a)(B,2),$=X[0],te=X[1];Object(a.useEffect)((function(){return Y.on(Q,(function(e){_(e)})),Y.on(ee,(function(e){te(e)})),Y.on(Z,(function(e){var n,t=e.id,a=e.mode,c=e.codeValue,r=e.userName,i=null===(n=T[t])||void 0===n?void 0:n.name;d(t),l(a),_(c),te({type:o.A_LANGUAGE_CHANGE,payload:{userName:r,language:i}})})),Y.on(ne,(function(e){te(e)})),function(){Y.off(Q),Y.off(ee),Y.off(Z)}}),[]);var oe=function(){var e=Object(g.a)(O.a.mark((function e(n,t){var o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(!0),e.next=4,A.a.request({method:"POST",url:"".concat(F,"/submissions"),data:{languageId:n,sourceCode:t}});case 4:return o=e.sent,console.log("compile: ",o),e.abrupt("return",o.data.token);case 9:e.prev=9,e.t0=e.catch(0),console.log("Error while submitting",e.t0),I(!1),J(e.t0),M(!0);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,t){return e.apply(this,arguments)}}(),le=function(){var e=Object(g.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return I(!1),M(!0),e.abrupt("return");case 4:return e.next=6,A.a.request({method:"GET",url:"".concat(F,"/submissions/").concat(n)}).then((function(e){var n=e.data.data,t=n.stderr,a=n.status,c=n.stdout,r=n.compile_output;if(console.log("results",e),a&&[1,2,3].includes(a.id)){console.log("we got stdout",c),I(!1);var l={type:o.A_CODE_RUN_RESULT,payload:{result:c}};te(l),Y.emit(ne,l)}else r?(console.log(r),I(!1),J(t),M(!0)):t?(console.log(t),I(!1),J(t),M(!0)):(console.log("something else happened"),I(!1))})).catch((function(e){console.log(e),I(!1),M(!0)}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(g.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={type:o.A_CODE_RUN,payload:{userName:n,langId:u}},te(t),Y.emit(ee,t),e.next=5,oe(u,v);case 5:return a=e.sent,e.next=8,K(5e3);case 8:return e.next=10,le(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ae.jsxs)(j.a,{height:"100%",width:"100%",className:"container",children:[Object(ae.jsx)(q.a,{defaultSize:{width:"70%",height:"100%"},style:{borderRight:"10px solid #202020"},maxWidth:"70%",minWidth:"30%",enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},children:Object(ae.jsxs)(j.a,{direction:"column",position:"relative",height:"100%",width:"100%",bg:"cornsilk",className:"code-editor-comp",children:[Object(ae.jsxs)(j.a,{color:"white",padding:2,className:"code-header",bg:"#202020",children:[Object(ae.jsx)(b.a,{colorScheme:"blue",size:"sm",onClick:ie,disabled:z,children:Object(ae.jsxs)(m.a,{children:[Object(ae.jsx)(f.a,{children:"Run"}),z?Object(ae.jsx)(S.a,{size:"sm"}):Object(ae.jsx)(f.a,{children:Object(ae.jsx)(w.a,{fontSize:"10px"})})]})}),Object(ae.jsx)(y.a,{cursor:"pointer",ml:5,size:"sm",width:"7rem",borderRadius:"0.375rem",value:u,onChange:function(e){var t=e.target.value,a=T[t],c=a.mode,r=a.defaultValue;d(+t),l(c),_(r),te({type:o.A_LANGUAGE_CHANGE,payload:{userName:n,language:a.name}}),Y.emit(Z,{id:t,mode:c,codeValue:r,userName:n})},children:Object.keys(T).map((function(e){var n=T[e];return Object(ae.jsx)("option",{value:e,style:{backgroundColor:"#202020"},children:n.name},e)}))}),Object(ae.jsx)(y.a,{cursor:"pointer",ml:5,size:"sm",width:"10rem",borderRadius:"0.375rem",value:k,onChange:function(e){var n=e.target.value;G(n)},children:P.map((function(e){return Object(ae.jsx)("option",{value:e,style:{backgroundColor:"#202020"},children:e},Math.random())}))})]}),Object(ae.jsx)(C.a,{mode:r,theme:k,height:"100%",width:"100%",onChange:function(e){_(e),Y.emit(Q,e)},name:"CODEEDITOR",editorProps:{$blockScrolling:!0},fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,focus:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},value:v})]})}),Object(ae.jsx)(ce,{items:$})]})},ie=t(105),se=(t(671),t(150)),ue=function(){return new URLSearchParams(Object(u.g)().search)},de=function(){var e=Object(u.f)();return Object(ae.jsx)(j.a,{cursor:"pointer",mr:3,onClick:function(n){e.push("/")},children:[{value:"Code",color:"#38A169",fontSize:"2xl"},{value:"Collab",color:"#3182CE",fontSize:"2xl"}].map((function(e){var n=e.value,t=e.color,o=e.fontSize;return Object(ae.jsx)(oe.a,{as:"span",color:t,fontSize:o,children:n},Math.random())}))})},je=function(){var e=Object(a.useState)(!1),n=Object(x.a)(e,2),t=n[0],o=n[1],c=Object(a.useRef)(),r=Object(a.useRef)();Object(a.useEffect)((function(){var e=c.current;if(e){e.width=2*window.innerWidth,e.height=2*window.innerHeight,e.style.width="".concat(window.innerWidth,"px"),e.style.height="".concat(window.innerHeight,"px");var n=e.getContext("2d");n&&(n.scale(2,2),n.lineCap="round",n.strokeStyle="#3182CE",n.lineWidth=5,r.current=n)}}),[]);return Object(ae.jsxs)(j.a,{height:"100%",width:"100%",direction:"column",children:[Object(ae.jsxs)(j.a,{bg:"#202020",width:"100%",padding:2,children:[Object(ae.jsx)(b.a,{size:"sm",colorScheme:"green",onClick:function(){var e=c.current;r.current.fillStyle="#272822",r.current.fillRect(0,0,e.width,e.height)},children:"Clear"}),Object(ae.jsx)(b.a,{ml:5,size:"sm",colorScheme:"green",children:"Undo"}),Object(ae.jsx)(b.a,{ml:5,size:"sm",colorScheme:"green",children:"Save"}),Object(ae.jsx)(b.a,{ml:5,size:"sm",colorScheme:"green",children:"Load"})]}),Object(ae.jsx)("canvas",{ref:c,onMouseDown:function(e){var n=e.nativeEvent,t=n.offsetX,a=n.offsetY;r.current.beginPath(),r.current.moveTo(t,a),o(!0)},onMouseUp:function(){r.current.closePath(),o(!1)},onMouseMove:function(e){var n=e.nativeEvent;if(t){var o=n.offsetX,a=n.offsetY;r.current.lineTo(o,a),r.current.stroke()}}})]})},be=function(e){var n=[{value:"Code",icon:Object(ae.jsx)(ie.a,{})},{value:"Draw",icon:Object(ae.jsx)(ie.b,{})}],t=Object(u.h)().roomId,o=ue().get("user"),c=Object(d.a)();Object(a.useEffect)((function(){Y.on($,(function(e){console.log(e,"joined"),c({title:"".concat(e," joined"),status:"success",isClosable:!0})})),Y.on(te,(function(e){console.log(e,"left"),c({title:"".concat(e," left"),status:"error",isClosable:!0})}));var e={room:t,name:o};return Y.emit($,e),function(){Y.off($),Y.off(te)}}),[]);var r=function(){return Object(ae.jsxs)(j.a,{className:"navbar",color:"white",backgroundColor:"#202020",alignItems:"center",padding:2,children:[Object(ae.jsx)(de,{}),Object(ae.jsx)(se.CopyToClipboard,{text:t,onCopy:function(e,n){console.log("copied",e),c({title:"Copied roomId: ".concat(t),status:"success",isClosable:!0,position:"top"})},children:Object(ae.jsx)(b.a,{colorScheme:"green",size:"sm",children:"Copy RoomId"})})]})};return Object(ae.jsxs)(j.a,{className:"playground",direction:"column",height:"100vh",width:"100vw",children:[Object(ae.jsx)(r,{}),Object(ae.jsx)(j.a,{className:"playground-inner",flex:"1",children:Object(ae.jsxs)(h.e,{variant:"enclosed-colored",bgColor:"#272822",borderBottomColor:"#202020",width:"100%",display:"flex",flexDirection:"column",defaultIndex:1,isLazy:!0,children:[Object(ae.jsx)(h.b,{children:n.map((function(e){return Object(ae.jsx)(h.a,{className:"tab_mine",bg:"#272822",color:"grey",borderTop:"none",borderLeft:"none",borderRight:"none",borderBottom:"none",_selected:{color:"white",bg:"#202020",border:"none",borderTop:"3px solid green",borderTopColor:"blue.500"},children:Object(ae.jsxs)(m.a,{children:[Object(ae.jsx)(f.a,{children:e.icon}),Object(ae.jsx)(f.a,{children:e.value})]})},Math.random())}))}),Object(ae.jsxs)(h.d,{flex:"1 1 auto",children:[Object(ae.jsx)(h.c,{padding:0,height:"100%",children:Object(ae.jsx)(le,{userName:o})}),Object(ae.jsx)(h.c,{padding:0,height:"100%",children:Object(ae.jsx)(je,{})})]})]})})]})},he=t(696),me=t(699),fe=t(697),pe=t(702),Oe=function(){var e=Object(u.f)(),n=Object(he.a)(),t=n.isOpen,o=n.onOpen,c=n.onClose,r=Object(a.useState)(""),l=Object(x.a)(r,2),i=l[0],s=l[1],d=Object(a.useState)(!0),j=Object(x.a)(d,2),h=j[0],m=j[1],f=function(){var n=Object(pe.a)();e.push("".concat(n,"?user=").concat(i))};return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(b.a,{colorScheme:"blue",onClick:o,children:"Launch Session"}),Object(ae.jsxs)(me.a,{isOpen:t,onClose:c,isCentered:!0,children:[Object(ae.jsx)(me.g,{}),Object(ae.jsxs)(me.d,{children:[Object(ae.jsx)(me.f,{children:"Launch a Collaborative Session"}),Object(ae.jsx)(me.c,{}),Object(ae.jsxs)(me.b,{children:[Object(ae.jsx)(oe.a,{mb:4,fontSize:"md",children:"Enter your Name:"}),Object(ae.jsx)(fe.a,{autoFocus:!0,value:i,onChange:function(e){var n=e.target.value;s(n),m(!(n&&n.length>0))},placeholder:"Ada Lovelace",onKeyDown:function(e){"Enter"!==e.key||h||f()}})]}),Object(ae.jsx)(me.e,{children:Object(ae.jsx)(b.a,{colorScheme:"blue",mr:3,onClick:function(e){f()},disabled:h,children:"Launch"})})]})]})]})},ge=function(){var e=Object(u.f)(),n=Object(he.a)(),t=n.isOpen,o=n.onOpen,c=n.onClose,r=Object(a.useState)(""),l=Object(x.a)(r,2),i=l[0],s=l[1],d=Object(a.useState)(""),j=Object(x.a)(d,2),h=j[0],m=j[1],f=Object(a.useState)(!0),p=Object(x.a)(f,2),O=p[0],g=p[1],v=function(e,n){return(null===e||void 0===e?void 0:e.length)>0&&(null===n||void 0===n?void 0:n.length)>0},C=function(){e.push("".concat(h,"?user=").concat(i))},S=function(e){"Enter"!==e.key||O||C()};return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(b.a,{colorScheme:"green",onClick:o,mt:6,children:"Join a Session"}),Object(ae.jsxs)(me.a,{isOpen:t,onClose:c,isCentered:!0,children:[Object(ae.jsx)(me.g,{}),Object(ae.jsxs)(me.d,{children:[Object(ae.jsx)(me.f,{children:"Join an already running session"}),Object(ae.jsx)(me.c,{}),Object(ae.jsxs)(me.b,{children:[Object(ae.jsx)(oe.a,{mb:4,fontSize:"md",children:"Enter your Name:"}),Object(ae.jsx)(fe.a,{value:i,onChange:function(e){var n=e.target.value;s(n),g(!v(n,h))},placeholder:"Ada Lovelace",autoFocus:!0,onKeyDown:S}),Object(ae.jsx)(oe.a,{mt:4,mb:4,fontSize:"md",children:"Enter Room ID:"}),Object(ae.jsx)(fe.a,{value:h,onChange:function(e){var n=e.target.value;m(n),g(!v(i,n))},placeholder:"xxxxxxxx-yyyy-zzzz-aaaa-bbbbbbbbbbbb",onKeyDown:S})]}),Object(ae.jsx)(me.e,{children:Object(ae.jsx)(b.a,{colorScheme:"blue",mr:3,onClick:function(e){C()},disabled:O,children:"Join"})})]})]})]})},xe=function(e){return Object(ae.jsxs)(j.a,{height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center",bg:"#272822",direction:"column",children:[Object(ae.jsx)(Oe,{}),Object(ae.jsx)(ge,{})]})};var ve=function(){return Object(ae.jsx)(i.a,{children:Object(ae.jsx)(s.a,{children:Object(ae.jsxs)(u.c,{children:[Object(ae.jsx)(u.a,{exact:!0,path:"/",component:xe}),Object(ae.jsx)(u.a,{exact:!0,path:"/:roomId",component:be})]})})})};l.a.render(Object(ae.jsx)(c.a.StrictMode,{children:Object(ae.jsx)(ve,{})}),document.getElementById("root"))}},[[676,1,2]]]);
//# sourceMappingURL=main.b4784539.chunk.js.map